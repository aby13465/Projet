{"ast":null,"code":"import _toConsumableArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Table from\"@material-ui/core/Table\";import{TextField,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Button,Dialog,DialogTitle,DialogContent,DialogActions}from\"@material-ui/core\";import axios from\"axios\";var useStyles=makeStyles({table:{minWidth:650}});export default function Clients(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),id=_useState2[0],setId=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),nom=_useState6[0],setNom=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),prenom=_useState8[0],setPrenom=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),rows=_useState10[0],setRows=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),open=_useState12[0],setOpen=_useState12[1];var refreshRows=function refreshRows(){axios.post(\"http://localhost:4000/clients/getclients\",{},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(resultat){resultat.data.forEach(function(r){setRows(function(rows){return[].concat(_toConsumableArray(rows),[{_id:r._id,nom:r.nom,prenom:r.prenom,email:r.email,cree:r.cree}]);});});});};useEffect(function(){refreshRows();},[]);var classes=useStyles();return React.createElement(\"div\",null,React.createElement(Dialog,{open:open,fullWidth:true,onClose:function onClose(){setOpen(false);},\"aria-labelledby\":\"form-dialog-title\"},React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Modifier\"),React.createElement(DialogContent,null,React.createElement(TextField,{value:nom,onChange:function onChange(event){return setNom(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"nom\",label:\"Nom\",name:\"nom\",autoComplete:\"nom\"}),React.createElement(TextField,{value:prenom,onChange:function onChange(event){return setPrenom(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"prenom\",label:\"Pr\\xE9nom\",name:\"prenom\",autoComplete:\"prenom\"}),React.createElement(TextField,{value:email,onChange:function onChange(event){return setEmail(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email\",name:\"email\",autoComplete:\"email\"})),React.createElement(DialogActions,null,React.createElement(Button,{color:\"primary\",onClick:function onClick(){axios.post(\"http://localhost:4000/clients/modifierclient\",{_id:id,nom:nom,prenom:prenom,email:email},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){setRows([]);setOpen(false);refreshRows();});}},\"Confirmer\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){setOpen(false);}},\"Annuler\"))),React.createElement(TableContainer,{component:Paper},React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"ID\"),React.createElement(TableCell,null,\"Nom\"),React.createElement(TableCell,null,\"Prenom\"),React.createElement(TableCell,null,\"E-mail\"),React.createElement(TableCell,null,\"Date de cr\\xE9ation\"),React.createElement(TableCell,{align:\"center\"},\"Actions\"))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,null,React.createElement(TableCell,null,row._id),React.createElement(TableCell,null,row.nom),React.createElement(TableCell,null,row.prenom),React.createElement(TableCell,null,row.email),React.createElement(TableCell,null,row.cree),React.createElement(TableCell,{align:\"center\"},React.createElement(Button,{color:\"primary\",onClick:function onClick(){setOpen(true);setId(row._id);setNom(row.nom);setPrenom(row.prenom);setEmail(row.email);}},\"Modifier\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){axios.post(\"http://localhost:4000/clients/supprimerclient\",{_id:row._id},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){setRows([]);refreshRows();});}},\"Supprimer\")));})))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Clients/Clients.js"],"names":["React","useState","useEffect","makeStyles","Table","TextField","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","Dialog","DialogTitle","DialogContent","DialogActions","axios","useStyles","table","minWidth","Clients","id","setId","email","setEmail","nom","setNom","prenom","setPrenom","rows","setRows","open","setOpen","refreshRows","post","headers","Authorization","localStorage","getItem","then","resultat","data","forEach","r","_id","cree","classes","event","target","value","map","row"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport {\r\n  TextField,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\n\r\nexport default function Clients() {\r\n  const [id, setId] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [nom, setNom] = useState(\"\");\r\n  const [prenom, setPrenom] = useState(\"\");\r\n  const [rows, setRows] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const refreshRows = () => {\r\n    axios\r\n      .post(\r\n        \"http://localhost:4000/clients/getclients\",\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      )\r\n      .then((resultat) => {\r\n        resultat.data.forEach((r) => {\r\n          setRows((rows) => [\r\n            ...rows,\r\n            {\r\n              _id: r._id,\r\n              nom: r.nom,\r\n              prenom: r.prenom,\r\n              email: r.email,\r\n              cree: r.cree,\r\n            },\r\n          ]);\r\n        });\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshRows();\r\n  }, []);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Modifier</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            value={nom}\r\n            onChange={(event) => setNom(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"nom\"\r\n            label=\"Nom\"\r\n            name=\"nom\"\r\n            autoComplete=\"nom\"\r\n          />\r\n          <TextField\r\n            value={prenom}\r\n            onChange={(event) => setPrenom(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"prenom\"\r\n            label=\"Prénom\"\r\n            name=\"prenom\"\r\n            autoComplete=\"prenom\"\r\n          />\r\n          <TextField\r\n            value={email}\r\n            onChange={(event) => setEmail(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              axios\r\n                .post(\r\n                  \"http://localhost:4000/clients/modifierclient\",\r\n                  {\r\n                    _id: id,\r\n                    nom: nom,\r\n                    prenom: prenom,\r\n                    email: email,\r\n                  },\r\n                  {\r\n                    headers: {\r\n                      Authorization:\r\n                        \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                    },\r\n                  }\r\n                )\r\n                .then(() => {\r\n                  setRows([]);\r\n                  setOpen(false);\r\n                  refreshRows();\r\n                });\r\n            }}\r\n          >\r\n            Confirmer\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Annuler\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <TableContainer component={Paper}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Nom</TableCell>\r\n              <TableCell>Prenom</TableCell>\r\n              <TableCell>E-mail</TableCell>\r\n              <TableCell>Date de création</TableCell>\r\n              <TableCell align=\"center\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => (\r\n              <TableRow>\r\n                <TableCell>{row._id}</TableCell>\r\n                <TableCell>{row.nom}</TableCell>\r\n                <TableCell>{row.prenom}</TableCell>\r\n                <TableCell>{row.email}</TableCell>\r\n                <TableCell>{row.cree}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setOpen(true);\r\n                      setId(row._id);\r\n                      setNom(row.nom);\r\n                      setPrenom(row.prenom);\r\n                      setEmail(row.email);\r\n                    }}\r\n                  >\r\n                    Modifier\r\n                  </Button>\r\n                  <Button\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      axios\r\n                        .post(\r\n                          \"http://localhost:4000/clients/supprimerclient\",\r\n                          { _id: row._id },\r\n                          {\r\n                            headers: {\r\n                              Authorization:\r\n                                \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                            },\r\n                          }\r\n                        )\r\n                        .then(() => {\r\n                          setRows([]);\r\n                          refreshRows();\r\n                        });\r\n                    }}\r\n                  >\r\n                    Supprimer\r\n                  </Button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}