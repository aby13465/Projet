{"ast":null,"code":"import _regeneratorRuntime from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{ClickAwayListener,Grow,Paper,Popper,MenuItem,MenuList}from\"@material-ui/core\";import{AppBar,Toolbar,Button,Typography}from\"@material-ui/core\";import{HomeRounded,ShoppingCartRounded,AccountCircleRounded}from\"@material-ui/icons\";var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},menuButton:{marginRight:theme.spacing(2)},title:{flexGrow:1},paper:{marginRight:theme.spacing(2)}};});export default function NavBar(props){var classes=useStyles();var Auth=localStorage.getItem(\"jwt-cookie\");var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var anchorRef=React.useRef(null);var handleToggle=function handleToggle(){setOpen(function(prevOpen){return!prevOpen;});};var handleClose=function handleClose(event){if(anchorRef.current&&anchorRef.current.contains(event.target)){return;}setOpen(false);};function handleListKeyDown(event){if(event.key===\"Tab\"){event.preventDefault();setOpen(false);}}var prevOpen=React.useRef(open);React.useEffect(function(){if(prevOpen.current===true&&open===false){anchorRef.current.focus();}prevOpen.current=open;},[open]);var clientLinks=React.createElement(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown},React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Historique\";setOpen(false);},color:\"inherit\"},\"Historique\"),React.createElement(MenuItem,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.location=\"/Compte\";setOpen(false);case 2:case\"end\":return _context.stop();}}},_callee);})),color:\"inherit\"},\"Compte\"),React.createElement(MenuItem,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return localStorage.removeItem(\"jwt-cookie\");case 2:window.location=\"/Connexion\";case 3:case\"end\":return _context2.stop();}}},_callee2);})),color:\"inherit\"},\"D\\xE9connexion\"));var visiteurLinks=React.createElement(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown},React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Inscription\";setOpen(false);},color:\"inherit\"},\"Inscription\"),React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Connexion\";setOpen(false);},color:\"inherit\"},\"Connexion\"));return React.createElement(\"div\",{className:classes.root},React.createElement(AppBar,{position:\"static\",color:\"primary\"},React.createElement(Toolbar,null,React.createElement(Typography,{className:classes.title,color:\"inherit\"},\"Logo\"),React.createElement(Button,{onClick:function onClick(){window.location=\"/\";},color:\"inherit\"},React.createElement(HomeRounded,null)),React.createElement(\"div\",null,React.createElement(Button,{ref:anchorRef,\"aria-controls\":open?\"menu-list-grow\":undefined,\"aria-haspopup\":\"true\",onClick:handleToggle,color:\"inherit\"},React.createElement(AccountCircleRounded,null)),React.createElement(Popper,{open:open,anchorEl:anchorRef.current,role:undefined,transition:true,disablePortal:true},function(_ref3){var TransitionProps=_ref3.TransitionProps,placement=_ref3.placement;return React.createElement(Grow,Object.assign({},TransitionProps,{style:{transformOrigin:placement===\"bottom\"?\"center top\":\"center bottom\"}}),React.createElement(Paper,null,React.createElement(ClickAwayListener,{onClickAway:handleClose},Auth?clientLinks:visiteurLinks)));})),React.createElement(Button,{onClick:function onClick(){window.location=\"/Panier\";},color:\"inherit\"},React.createElement(ShoppingCartRounded,null)))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/NavBar/NavBar.js"],"names":["React","makeStyles","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","AppBar","Toolbar","Button","Typography","HomeRounded","ShoppingCartRounded","AccountCircleRounded","useStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","paper","NavBar","props","classes","Auth","localStorage","getItem","useState","open","setOpen","anchorRef","useRef","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","useEffect","focus","clientLinks","window","location","removeItem","visiteurLinks","undefined","TransitionProps","placement","transformOrigin"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  makeStyles\r\n} from \"@material-ui/core/styles\";\r\nimport {\r\n  ClickAwayListener,\r\n  Grow,\r\n  Paper,\r\n  Popper,\r\n  MenuItem,\r\n  MenuList\r\n} from \"@material-ui/core\";\r\nimport { AppBar, Toolbar, Button, Typography } from \"@material-ui/core\";\r\nimport {\r\n  HomeRounded,\r\n  ShoppingCartRounded,\r\n  AccountCircleRounded\r\n} from \"@material-ui/icons\";\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    flexGrow: 1\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2)\r\n  },\r\n  title: {\r\n    flexGrow: 1\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nexport default function NavBar(props) {\r\n  const classes = useStyles();\r\n  const Auth = localStorage.getItem(\"jwt-cookie\");\r\n  const [open, setOpen] = React.useState(false);\r\n  const anchorRef = React.useRef(null);\r\n\r\n  const handleToggle = () => {\r\n    setOpen(prevOpen => !prevOpen);\r\n  };\r\n  const handleClose = event => {\r\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n  function handleListKeyDown(event) {\r\n    if (event.key === \"Tab\") {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n  const prevOpen = React.useRef(open);\r\n  React.useEffect(() => {\r\n    if (prevOpen.current === true && open === false) {\r\n      anchorRef.current.focus();\r\n    }\r\n\r\n    prevOpen.current = open;\r\n  }, [open]);\r\n  const clientLinks = (\r\n    <MenuList\r\n      autoFocusItem={open}\r\n      id=\"menu-list-grow\"\r\n      onKeyDown={handleListKeyDown}\r\n    >\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Historique\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Historique\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={async () => {\r\n          window.location = \"/Compte\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Compte\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={async () => {\r\n          await localStorage.removeItem(\"jwt-cookie\");\r\n          window.location = \"/Connexion\";\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Déconnexion\r\n      </MenuItem>\r\n    </MenuList>\r\n  );\r\n  const visiteurLinks = (\r\n    <MenuList\r\n      autoFocusItem={open}\r\n      id=\"menu-list-grow\"\r\n      onKeyDown={handleListKeyDown}\r\n    >\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Inscription\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Inscription\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Connexion\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Connexion\r\n      </MenuItem>\r\n    </MenuList>\r\n  );\r\n\r\n  return (\r\n      <div className={classes.root}>\r\n        <AppBar position=\"static\" color=\"primary\">\r\n          <Toolbar>\r\n            <Typography className={classes.title} color=\"inherit\">\r\n              Logo\r\n            </Typography>\r\n            <Button\r\n              onClick={() => {\r\n                window.location = \"/\";\r\n              }}\r\n              color=\"inherit\"\r\n            >\r\n              <HomeRounded />\r\n            </Button>\r\n            <div>\r\n              <Button\r\n                ref={anchorRef}\r\n                aria-controls={open ? \"menu-list-grow\" : undefined}\r\n                aria-haspopup=\"true\"\r\n                onClick={handleToggle}\r\n                color=\"inherit\"\r\n              >\r\n                <AccountCircleRounded />\r\n              </Button>\r\n              <Popper\r\n                open={open}\r\n                anchorEl={anchorRef.current}\r\n                role={undefined}\r\n                transition\r\n                disablePortal\r\n              >\r\n                {({ TransitionProps, placement }) => (\r\n                  <Grow\r\n                    {...TransitionProps}\r\n                    style={{\r\n                      transformOrigin:\r\n                        placement === \"bottom\" ? \"center top\" : \"center bottom\"\r\n                    }}\r\n                  >\r\n                    <Paper>\r\n                      <ClickAwayListener onClickAway={handleClose}>\r\n                        {Auth ? clientLinks : visiteurLinks}\r\n                      </ClickAwayListener>\r\n                    </Paper>\r\n                  </Grow>\r\n                )}\r\n              </Popper>\r\n            </div>\r\n            <Button\r\n              onClick={() => {\r\n                window.location = \"/Panier\";\r\n              }}\r\n              color=\"inherit\"\r\n            >\r\n              <ShoppingCartRounded />\r\n            </Button>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}