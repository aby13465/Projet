{"ast":null,"code":"var _jsxFileName = \"E:\\\\projetpfe\\\\front-end\\\\src\\\\Clients\\\\Clients.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Table from \"@material-ui/core/Table\";\nimport { TextField, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Button, Dialog, DialogTitle, DialogContent, DialogActions } from \"@material-ui/core\";\nimport axios from \"axios\";\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n});\nexport default function Clients(props) {\n  const [id, setId] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [nom, setNom] = useState(\"\");\n  const [prenom, setPrenom] = useState(\"\");\n  const [telephone, setTelephone] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  const [rows, setRows] = useState([]);\n  const [open, setOpen] = useState(false);\n\n  const tableHeadActions = () => {\n    if (props.type === \"administrateur\") return React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Actions\");\n  };\n\n  const tableBodyActions = row => {\n    if (props.type === \"administrateur\") return React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"primary\",\n      onClick: () => {\n        setOpen(true);\n        setId(row._id);\n        setNom(row.nom);\n        setPrenom(row.prenom);\n        setEmail(row.email);\n        setTelephone(row.telephone);\n        setType(t => row.administrateur ? \"Administrateur\" : row.moderateur ? \"Moderateur\" : \"Client\");\n        console.log(type);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, \"Modifier\"), React.createElement(Button, {\n      color: \"secondary\",\n      onClick: () => {\n        axios.post(\"http://localhost:4000/clients/supprimerclient\", {\n          _id: row._id\n        }, {\n          headers: {\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n          }\n        }).then(() => {\n          setRows([]);\n          refreshRows();\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Supprimer\"));\n  };\n\n  const refreshRows = () => {\n    axios.post(\"http://localhost:4000/clients/getclients\", {}, {\n      headers: {\n        Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n      }\n    }).then(resultat => {\n      console.log(resultat.data);\n      resultat.data.forEach(r => {\n        setRows(rows => [...rows, {\n          _id: r._id,\n          nom: r.nom,\n          prenom: r.prenom,\n          email: r.email,\n          telephone: r.telephone,\n          cree: r.cree,\n          administrateur: r.administrateur,\n          moderateur: r.moderateur\n        }]);\n      });\n    });\n  };\n\n  useEffect(() => {\n    refreshRows();\n  }, []);\n  const classes = useStyles();\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(Dialog, {\n    open: open,\n    fullWidth: true,\n    onClose: () => {\n      setOpen(false);\n    },\n    \"aria-labelledby\": \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Modifier\"), React.createElement(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    value: nom,\n    onChange: event => setNom(event.target.value),\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"nom\",\n    label: \"Nom\",\n    name: \"nom\",\n    autoComplete: \"nom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    value: prenom,\n    onChange: event => setPrenom(event.target.value),\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"prenom\",\n    label: \"Pr\\xE9nom\",\n    name: \"prenom\",\n    autoComplete: \"prenom\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    value: email,\n    onChange: event => setEmail(event.target.value),\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Email\",\n    name: \"email\",\n    autoComplete: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    value: telephone,\n    onChange: event => setTelephone(event.target.value),\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"telephone\",\n    label: \"T\\xE9l\\xE9phone\",\n    name: \"telephone\",\n    autoComplete: \"telephone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  })), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"primary\",\n    onClick: () => {\n      axios.post(\"http://localhost:4000/clients/modifierclient\", {\n        _id: id,\n        nom: nom,\n        prenom: prenom,\n        email: email,\n        telephone: telephone\n      }, {\n        headers: {\n          Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n        }\n      }).then(() => {\n        setRows([]);\n        setOpen(false);\n        refreshRows();\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, \"Confirmer\"), React.createElement(Button, {\n    color: \"secondary\",\n    onClick: () => {\n      setOpen(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Annuler\"))), React.createElement(TableContainer, {\n    component: Paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"ID\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, \"Nom\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, \"Prenom\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, \"E-mail\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, \"T\\xE9l\\xE9phone\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }, \"Type\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }, \"Date de cr\\xE9ation\"), tableHeadActions())), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, rows.map(row => React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, row._id), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, row.nom), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, row.prenom), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, row.email), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, row.telephone), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  }, row.administrateur ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, \"Administrateur\") : row.moderateur ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256\n    },\n    __self: this\n  }, \"Moderateur\") : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, \"Client\")), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261\n    },\n    __self: this\n  }, row.cree), tableBodyActions(row)))))));\n}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Clients/Clients.js"],"names":["React","useState","useEffect","makeStyles","Table","TextField","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Button","Dialog","DialogTitle","DialogContent","DialogActions","axios","useStyles","table","minWidth","Clients","props","id","setId","email","setEmail","nom","setNom","prenom","setPrenom","telephone","setTelephone","type","setType","rows","setRows","open","setOpen","tableHeadActions","tableBodyActions","row","_id","t","administrateur","moderateur","console","log","post","headers","Authorization","localStorage","getItem","then","refreshRows","resultat","data","forEach","r","cree","classes","event","target","value","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport {\r\n  TextField,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\n\r\nexport default function Clients(props) {\r\n  const [id, setId] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [nom, setNom] = useState(\"\");\r\n  const [prenom, setPrenom] = useState(\"\");\r\n  const [telephone, setTelephone] = useState(\"\");\r\n  const [type, setType] = useState(\"\");\r\n  const [rows, setRows] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const tableHeadActions = () => {\r\n    if (props.type === \"administrateur\")\r\n      return <TableCell align=\"center\">Actions</TableCell>;\r\n  };\r\n\r\n  const tableBodyActions = (row) => {\r\n    if (props.type === \"administrateur\")\r\n      return (\r\n        <TableCell align=\"center\">\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              setOpen(true);\r\n              setId(row._id);\r\n              setNom(row.nom);\r\n              setPrenom(row.prenom);\r\n              setEmail(row.email);\r\n              setTelephone(row.telephone);\r\n              setType((t) =>\r\n                row.administrateur\r\n                  ? \"Administrateur\"\r\n                  : row.moderateur\r\n                  ? \"Moderateur\"\r\n                  : \"Client\"\r\n              );\r\n              console.log(type)\r\n            }}\r\n          >\r\n            Modifier\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              axios\r\n                .post(\r\n                  \"http://localhost:4000/clients/supprimerclient\",\r\n                  { _id: row._id },\r\n                  {\r\n                    headers: {\r\n                      Authorization:\r\n                        \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                    },\r\n                  }\r\n                )\r\n                .then(() => {\r\n                  setRows([]);\r\n                  refreshRows();\r\n                });\r\n            }}\r\n          >\r\n            Supprimer\r\n          </Button>\r\n        </TableCell>\r\n      );\r\n  };\r\n\r\n  const refreshRows = () => {\r\n    axios\r\n      .post(\r\n        \"http://localhost:4000/clients/getclients\",\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      )\r\n      .then((resultat) => {\r\n        console.log(resultat.data);\r\n        resultat.data.forEach((r) => {\r\n          setRows((rows) => [\r\n            ...rows,\r\n            {\r\n              _id: r._id,\r\n              nom: r.nom,\r\n              prenom: r.prenom,\r\n              email: r.email,\r\n              telephone: r.telephone,\r\n              cree: r.cree,\r\n              administrateur: r.administrateur,\r\n              moderateur: r.moderateur,\r\n            },\r\n          ]);\r\n        });\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshRows();\r\n  }, []);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Modifier</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            value={nom}\r\n            onChange={(event) => setNom(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"nom\"\r\n            label=\"Nom\"\r\n            name=\"nom\"\r\n            autoComplete=\"nom\"\r\n          />\r\n          <TextField\r\n            value={prenom}\r\n            onChange={(event) => setPrenom(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"prenom\"\r\n            label=\"Prénom\"\r\n            name=\"prenom\"\r\n            autoComplete=\"prenom\"\r\n          />\r\n          <TextField\r\n            value={email}\r\n            onChange={(event) => setEmail(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n          <TextField\r\n            value={telephone}\r\n            onChange={(event) => setTelephone(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"telephone\"\r\n            label=\"Téléphone\"\r\n            name=\"telephone\"\r\n            autoComplete=\"telephone\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              axios\r\n                .post(\r\n                  \"http://localhost:4000/clients/modifierclient\",\r\n                  {\r\n                    _id: id,\r\n                    nom: nom,\r\n                    prenom: prenom,\r\n                    email: email,\r\n                    telephone: telephone,\r\n                  },\r\n                  {\r\n                    headers: {\r\n                      Authorization:\r\n                        \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                    },\r\n                  }\r\n                )\r\n                .then(() => {\r\n                  setRows([]);\r\n                  setOpen(false);\r\n                  refreshRows();\r\n                });\r\n            }}\r\n          >\r\n            Confirmer\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Annuler\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <TableContainer component={Paper}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Nom</TableCell>\r\n              <TableCell>Prenom</TableCell>\r\n              <TableCell>E-mail</TableCell>\r\n              <TableCell>Téléphone</TableCell>\r\n              <TableCell>Type</TableCell>\r\n              <TableCell>Date de création</TableCell>\r\n              {tableHeadActions()}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => (\r\n              <TableRow>\r\n                <TableCell>{row._id}</TableCell>\r\n                <TableCell>{row.nom}</TableCell>\r\n                <TableCell>{row.prenom}</TableCell>\r\n                <TableCell>{row.email}</TableCell>\r\n                <TableCell>{row.telephone}</TableCell>\r\n                <TableCell>\r\n                  {row.administrateur ? (\r\n                    <div>Administrateur</div>\r\n                  ) : row.moderateur ? (\r\n                    <div>Moderateur</div>\r\n                  ) : (\r\n                    <div>Client</div>\r\n                  )}\r\n                </TableCell>\r\n                <TableCell>{row.cree}</TableCell>\r\n                {tableBodyActions(row)}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}