{"ast":null,"code":"import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";import React,{useEffect,useState}from\"react\";import{Route,Redirect}from\"react-router-dom\";import axios from\"axios\";export default function ClientRoute(_ref){var Component=_ref.component,rest=_objectWithoutProperties(_ref,[\"component\"]);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),type=_useState2[0],setType=_useState2[1];useEffect(function(){if(!localStorage.getItem(\"jwt-cookie\")){setType(\"visiteur\");}axios.post(\"http://localhost:4000/clients/type\",{},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(resultat){setType(resultat.data);});},[]);return React.createElement(Route,Object.assign({},rest,{render:function render(props){if(type===\"administrateur\"||type===\"moderateur\"||type===\"client\"){return React.createElement(Component,Object.assign({},props,{type:type}));}else if(type===\"visiteur\"){return React.createElement(Redirect,{to:{pathname:\"/Connexion\",state:{from:props.location}}});}}}));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/ClientRoute/ClientRoute.js"],"names":["React","useEffect","useState","Route","Redirect","axios","ClientRoute","Component","component","rest","type","setType","localStorage","getItem","post","headers","Authorization","then","resultat","data","props","pathname","state","from","location"],"mappings":"gPAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,CAAgBC,QAAhB,KAAgC,kBAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,cAAe,SAASC,CAAAA,WAAT,MAAwD,IAAtBC,CAAAA,SAAsB,MAAjCC,SAAiC,CAARC,IAAQ,4DAC7CP,QAAQ,CAAC,IAAD,CADqC,wCAC9DQ,IAD8D,eACxDC,OADwD,eAGrEV,SAAS,CAAC,UAAM,CACd,GAAI,CAACW,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAL,CAAyC,CACvCF,OAAO,CAAC,UAAD,CAAP,CACD,CACDN,KAAK,CACFS,IADH,CAEI,oCAFJ,CAGI,EAHJ,CAII,CACEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYJ,YAAY,CAACC,OAAb,CAAqB,YAArB,CADpB,CADX,CAJJ,EAUGI,IAVH,CAUQ,SAACC,QAAD,CAAc,CAClBP,OAAO,CAACO,QAAQ,CAACC,IAAV,CAAP,CACD,CAZH,EAaD,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,MACE,qBAAC,KAAD,kBACMV,IADN,EAEE,MAAM,CAAE,gBAACW,KAAD,CAAW,CACjB,GACEV,IAAI,GAAK,gBAAT,EACAA,IAAI,GAAK,YADT,EAEAA,IAAI,GAAK,QAHX,CAIE,CACA,MAAO,qBAAC,SAAD,kBAAeU,KAAf,EAAsB,IAAI,CAAEV,IAA5B,GAAP,CACD,CAND,IAMO,IAAIA,IAAI,GAAK,UAAb,CAAyB,CAC9B,MACE,qBAAC,QAAD,EAAU,EAAE,CAAE,CAAEW,QAAQ,CAAE,YAAZ,CAA0BC,KAAK,CAAE,CAAEC,IAAI,CAAEH,KAAK,CAACI,QAAd,CAAjC,CAAd,EADF,CAGD,CACF,CAdH,GADF,CAkBD","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nexport default function ClientRoute({ component: Component, ...rest }) {\r\n  const [type, setType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!localStorage.getItem(\"jwt-cookie\")) {\r\n      setType(\"visiteur\");\r\n    }\r\n    axios\r\n      .post(\r\n        \"http://localhost:4000/clients/type\",\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      )\r\n      .then((resultat) => {\r\n        setType(resultat.data);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        if (\r\n          type === \"administrateur\" ||\r\n          type === \"moderateur\" ||\r\n          type === \"client\"\r\n        ) {\r\n          return <Component {...props} type={type} />;\r\n        } else if (type === \"visiteur\") {\r\n          return (\r\n            <Redirect to={{ pathname: \"/Connexion\", state: { from: props.location } }} />\r\n          );\r\n        }\r\n      }}\r\n    />\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}