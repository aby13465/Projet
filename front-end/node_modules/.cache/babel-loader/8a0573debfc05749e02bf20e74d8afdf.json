{"ast":null,"code":"import _toConsumableArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Container,Button,Typography,Grid}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import axios from\"axios\";var useStyles=makeStyles(function(theme){return{form:{padding:theme.spacing(3)}};});export default function Panier(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];useEffect(function(){axios.post(\"http://localhost:4000/clients/getpanier\",{},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(resultat){resultat.data.forEach(function(d){axios.get(\"http://localhost:4000/articles/recherche/\"+d._id).then(function(resultat){return setItems(function(items){return[].concat(_toConsumableArray(items),[{nom:resultat.data.nom,quantite:d.quantite,prix:resultat.data.prix}]);});});});});},[]);var handleSubmit=function handleSubmit(event){event.preventDefault();if(!localStorage.getItem(\"jwt-cookie\")){window.location=\"/Connexion\";}};return React.createElement(Container,{component:\"main\"},React.createElement(\"form\",{onSubmit:handleSubmit,noValidate:true,className:classes.form},React.createElement(Grid,{container:true,spacing:1,direction:\"column\"},items.map(function(item){return React.createElement(Grid,{item:true,xs:12,spacing:3},React.createElement(Typography,null,item.nom),React.createElement(Typography,null,item.quantite),React.createElement(Typography,null,item.prix,\"DT\"));}),React.createElement(Grid,{item:true,spacing:3},React.createElement(Button,{variant:\"contained\",color:\"primary\",type:\"submit\"},\"Commander\")))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Panier/Panier.js"],"names":["React","useEffect","useState","Container","Button","Typography","Grid","makeStyles","axios","useStyles","theme","form","padding","spacing","Panier","classes","items","setItems","post","headers","Authorization","localStorage","getItem","then","resultat","data","forEach","d","get","_id","nom","quantite","prix","handleSubmit","event","preventDefault","window","location","map","item"],"mappings":"oOAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,MAApB,CAA4BC,UAA5B,CAAwCC,IAAxC,KAAoD,mBAApD,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,SAAS,CAAGF,UAAU,CAAC,SAACG,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,OAAO,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADL,CADiC,CAAZ,EAAD,CAA5B,CAMA,cAAe,SAASC,CAAAA,MAAT,EAAkB,CAC/B,GAAMC,CAAAA,OAAO,CAAGN,SAAS,EAAzB,CAD+B,cAELP,QAAQ,CAAC,EAAD,CAFH,wCAExBc,KAFwB,eAEjBC,QAFiB,eAG/BhB,SAAS,CAAC,UAAM,CACdO,KAAK,CACFU,IADH,CAEI,yCAFJ,CAGI,EAHJ,CAII,CACEC,OAAO,CAAE,CACPC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,YAArB,CADpB,CADX,CAJJ,EAUGC,IAVH,CAUQ,SAACC,QAAD,CAAc,CAClBA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsB,SAACC,CAAD,CAAO,CAC3BnB,KAAK,CACFoB,GADH,CACO,4CAA8CD,CAAC,CAACE,GADvD,EAEGN,IAFH,CAEQ,SAACC,QAAD,QACJP,CAAAA,QAAQ,CAAC,SAACD,KAAD,qCACJA,KADI,GAEP,CACEc,GAAG,CAAEN,QAAQ,CAACC,IAAT,CAAcK,GADrB,CAEEC,QAAQ,CAAEJ,CAAC,CAACI,QAFd,CAGEC,IAAI,CAAER,QAAQ,CAACC,IAAT,CAAcO,IAHtB,CAFO,IAAD,CADJ,EAFR,EAYD,CAbD,EAcD,CAzBH,EA0BD,CA3BQ,CA2BN,EA3BM,CAAT,CA6BA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GACA,GAAI,CAACd,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAL,CAAyC,CACvCc,MAAM,CAACC,QAAP,CAAkB,YAAlB,CACD,CACF,CALD,CAOA,MACE,qBAAC,SAAD,EAAW,SAAS,CAAC,MAArB,EACE,4BAAM,QAAQ,CAAEJ,YAAhB,CAA8B,UAAU,KAAxC,CAAyC,SAAS,CAAElB,OAAO,CAACJ,IAA5D,EACE,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,SAAS,CAAC,QAAtC,EACGK,KAAK,CAACsB,GAAN,CAAU,SAACC,IAAD,QACT,qBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,EAAE,CAAE,EAAf,CAAmB,OAAO,CAAE,CAA5B,EACE,oBAAC,UAAD,MAAaA,IAAI,CAACT,GAAlB,CADF,CAEE,oBAAC,UAAD,MAAaS,IAAI,CAACR,QAAlB,CAFF,CAGE,oBAAC,UAAD,MAAaQ,IAAI,CAACP,IAAlB,MAHF,CADS,EAAV,CADH,CAQE,oBAAC,IAAD,EAAM,IAAI,KAAV,CAAW,OAAO,CAAE,CAApB,EACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,CAA4C,IAAI,CAAC,QAAjD,cADF,CARF,CADF,CADF,CADF,CAoBD","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Container, Button, Typography, Grid } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function Panier() {\r\n  const classes = useStyles();\r\n  const [items, setItems] = useState([]);\r\n  useEffect(() => {\r\n    axios\r\n      .post(\r\n        \"http://localhost:4000/clients/getpanier\",\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      )\r\n      .then((resultat) => {\r\n        resultat.data.forEach((d) => {\r\n          axios\r\n            .get(\"http://localhost:4000/articles/recherche/\" + d._id)\r\n            .then((resultat) =>\r\n              setItems((items) => [\r\n                ...items,\r\n                {\r\n                  nom: resultat.data.nom,\r\n                  quantite: d.quantite,\r\n                  prix: resultat.data.prix,\r\n                },\r\n              ])\r\n            );\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (!localStorage.getItem(\"jwt-cookie\")) {\r\n      window.location = \"/Connexion\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container component=\"main\">\r\n      <form onSubmit={handleSubmit} noValidate className={classes.form}>\r\n        <Grid container spacing={1} direction=\"column\">\r\n          {items.map((item) => (\r\n            <Grid item xs={12} spacing={3}>\r\n              <Typography>{item.nom}</Typography>\r\n              <Typography>{item.quantite}</Typography>\r\n              <Typography>{item.prix}DT</Typography>\r\n            </Grid>\r\n          ))}\r\n          <Grid item spacing={3}>\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n              Commander\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}