{"ast":null,"code":"import _toConsumableArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import axios from\"axios\";import{Paper,Table,TableCell,TableContainer,TableHead,TableRow,TableBody,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button}from\"@material-ui/core\";import{Autocomplete}from\"@material-ui/lab\";var useStyles=makeStyles(function(theme){return{table:{minWidth:650},image:{maxHeight:75,maxWidth:75},btnSpacing:{margin:theme.spacing(0,1,1,0)}};});export default function Articles(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),marques=_useState6[0],setMarques=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),id=_useState8[0],setId=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),nom=_useState10[0],setNom=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),prix=_useState12[0],setPrix=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),categorie=_useState14[0],setCategorie=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),marque=_useState16[0],setMarque=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),quantite=_useState18[0],setQuantite=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),description=_useState20[0],setDescription=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),couleur=_useState22[0],setCouleur=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),taille=_useState24[0],setTaille=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),image=_useState26[0],setImage=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),open=_useState28[0],setOpen=_useState28[1];var refreshRows=function refreshRows(){setOpen(false);setRows([]);axios.post(\"http://localhost:4000/articles/recherche\",{}).then(function(resultat){resultat.data.map(function(r){return r.image=\"data:image/jpeg;base64,\"+new Buffer(r.image.data.data).toString(\"base64\");});setRows(resultat.data);});};var modifier=function modifier(){var fd=new FormData();fd.append(\"_id\",id);fd.append(\"nom\",nom);fd.append(\"prix\",prix);fd.append(\"couleur\",couleur);fd.append(\"taille\",taille);fd.append(\"description\",description);fd.append(\"quantite\",quantite);fd.append(\"categorie\",categorie);fd.append(\"marque\",marque);fd.append(\"image\",image);axios.post(\"http://localhost:4000/articles/modifier\",fd,{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){return refreshRows();});};var ajouter=function ajouter(){var fd=new FormData();fd.append(\"nom\",nom);fd.append(\"prix\",prix);fd.append(\"couleur\",couleur);fd.append(\"taille\",taille);fd.append(\"description\",description);fd.append(\"quantite\",quantite);fd.append(\"categorie\",categorie);fd.append(\"marque\",marque);fd.append(\"image\",image);axios.post(\"http://localhost:4000/articles/ajouter\",fd,{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){return refreshRows();});};useEffect(function(){refreshRows();axios.post(\"http://localhost:4000/categories/recherche\",{}).then(function(resultat){resultat.data.forEach(function(d){return setCategories(function(categorie){return[].concat(_toConsumableArray(categorie),[{title:d.nom}]);});});});axios.post(\"http://localhost:4000/marques/recherche\",{}).then(function(resultat){resultat.data.forEach(function(d){return setMarques(function(marque){return[].concat(_toConsumableArray(marque),[{title:d.nom}]);});});});},[]);return React.createElement(\"div\",null,React.createElement(Dialog,{open:open,fullWidth:true,onClose:function onClose(){setOpen(false);},\"aria-labelledby\":\"form-dialog-title\"},React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Ajouter Article\"),React.createElement(DialogContent,null,React.createElement(TextField,{type:\"file\",variant:\"outlined\",margin:\"normal\",fullWidth:true,onChange:function onChange(event){setImage(event.target.files[0]);}}),React.createElement(TextField,{value:nom,onChange:function onChange(event){setNom(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"nom\",label:\"Nom\",name:\"nom\",autoComplete:\"nom\"}),React.createElement(TextField,{value:prix,onChange:function onChange(event){setPrix(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"prix\",label:\"Prix\",name:\"prix\",autoComplete:\"prix\"}),React.createElement(TextField,{value:quantite,onChange:function onChange(event){setQuantite(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"quantite\",label:\"Quantite\",name:\"quantite\",autoComplete:\"quantite\"}),React.createElement(Autocomplete,{className:classes.spacing,defaultValue:{title:categorie},id:\"categorie\",onInputChange:function onInputChange(event,value){return setCategorie(value);},options:categories,getOptionLabel:function getOptionLabel(option){return option.title;},renderInput:function renderInput(params){return React.createElement(TextField,Object.assign({},params,{label:\"Categorie\",margin:\"normal\",variant:\"outlined\"}));}}),React.createElement(Autocomplete,{className:classes.spacing,id:\"categorie\",onInputChange:function onInputChange(event,value){return setMarque(value);},defaultValue:{title:marque},options:marques,getOptionLabel:function getOptionLabel(option){return option.title;},renderInput:function renderInput(params){return React.createElement(TextField,Object.assign({},params,{label:\"Marque\",margin:\"normal\",variant:\"outlined\"}));}}),React.createElement(TextField,{value:couleur,onChange:function onChange(event){setCouleur(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"couleur\",label:\"Couleur\",name:\"couleur\",autoComplete:\"couleur\"}),React.createElement(TextField,{value:taille,onChange:function onChange(event){setTaille(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"taille\",label:\"Taille\",name:\"taille\",autoComplete:\"taille\"}),React.createElement(TextField,{value:description,multiline:\"true\",onChange:function onChange(event){setDescription(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"description\",label:\"Description\",name:\"description\",autoComplete:\"description\"})),React.createElement(DialogActions,null,React.createElement(Button,{color:\"primary\",onClick:function onClick(){if(id===\"\"){ajouter();}else{modifier();}}},\"Confirmer\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){setOpen(false);}},\"Annuler\"))),React.createElement(Button,{color:\"primary\",className:classes.btnSpacing,onClick:function onClick(){setOpen(true);setId(\"\");setNom(\"\");setPrix(\"\");setDescription(\"\");setQuantite(\"\");setCouleur(\"\");setTaille(\"\");setMarque(\"\");setCategorie(\"\");setImage(null);}},\"Ajouter Article\"),React.createElement(TableContainer,{component:Paper},React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"ID\"),React.createElement(TableCell,{align:\"center\"},\"Image\"),React.createElement(TableCell,null,\"Nom\"),React.createElement(TableCell,null,\"Prix\"),React.createElement(TableCell,null,\"Quantit\\xE9\"),React.createElement(TableCell,null,\"Date de cr\\xE9ation\"),React.createElement(TableCell,{align:\"center\"},\"Actions\"))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,null,React.createElement(TableCell,null,row._id),React.createElement(TableCell,{align:\"center\"},React.createElement(\"img\",{alt:row.nom,src:row.image,className:classes.image})),React.createElement(TableCell,null,row.nom),React.createElement(TableCell,null,row.prix),React.createElement(TableCell,null,row.quantite),React.createElement(TableCell,null,row.cree),React.createElement(TableCell,{align:\"center\"},React.createElement(Button,{color:\"primary\",onClick:function onClick(){setOpen(true);setId(row._id);setNom(row.nom);setPrix(row.prix);setDescription(row.description);setQuantite(row.quantite);setCouleur(row.couleur);setTaille(row.taille);setMarque(row.marque);setCategorie(row.categorie);}},\"Modifier\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){axios.post(\"http://localhost:4000/articles/supprimer\",{_id:row._id},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){refreshRows();});}},\"Supprimer\")));})))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Articles/Articles.js"],"names":["React","useEffect","useState","makeStyles","axios","Paper","Table","TableCell","TableContainer","TableHead","TableRow","TableBody","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","Autocomplete","useStyles","theme","table","minWidth","image","maxHeight","maxWidth","btnSpacing","margin","spacing","Articles","classes","rows","setRows","categories","setCategories","marques","setMarques","id","setId","nom","setNom","prix","setPrix","categorie","setCategorie","marque","setMarque","quantite","setQuantite","description","setDescription","couleur","setCouleur","taille","setTaille","setImage","open","setOpen","refreshRows","post","then","resultat","data","map","r","Buffer","toString","modifier","fd","FormData","append","headers","Authorization","localStorage","getItem","ajouter","forEach","d","title","event","target","files","value","option","params","row","_id","cree"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Paper,\r\n  Table,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TableBody,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  image:{\r\n  maxHeight: 75,\r\n  maxWidth: 75\r\n  },\r\n\r\n  btnSpacing: {\r\n    margin: theme.spacing(0, 1, 1, 0),\r\n  },\r\n}));\r\n\r\nexport default function Articles() {\r\n  const classes = useStyles();\r\n  const [rows, setRows] = useState([]);\r\n  const [categories, setCategories] = useState(\"\");\r\n  const [marques, setMarques] = useState(\"\");\r\n  const [id, setId] = useState(\"\");\r\n  const [nom, setNom] = useState(\"\");\r\n  const [prix, setPrix] = useState(\"\");\r\n  const [categorie, setCategorie] = useState(\"\");\r\n  const [marque, setMarque] = useState(\"\");\r\n  const [quantite, setQuantite] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [couleur, setCouleur] = useState(\"\");\r\n  const [taille, setTaille] = useState(\"\");\r\n  const [image, setImage] = useState(null);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const refreshRows = () => {\r\n    setOpen(false);\r\n    setRows([]);\r\n    axios\r\n      .post(\"http://localhost:4000/articles/recherche\", {})\r\n      .then((resultat) => {\r\n        resultat.data.map((r) => {\r\n          return r.image =\r\n            \"data:image/jpeg;base64,\" +\r\n            new Buffer(r.image.data.data).toString(\"base64\");\r\n        });\r\n        setRows(resultat.data);\r\n      });\r\n  };\r\n\r\n  const modifier = () => {\r\n    const fd = new FormData();\r\n    fd.append(\"_id\", id);\r\n    fd.append(\"nom\", nom);\r\n    fd.append(\"prix\", prix);\r\n    fd.append(\"couleur\", couleur);\r\n    fd.append(\"taille\", taille);\r\n    fd.append(\"description\", description);\r\n    fd.append(\"quantite\", quantite);\r\n    fd.append(\"categorie\", categorie);\r\n    fd.append(\"marque\", marque);\r\n    fd.append(\"image\", image);\r\n    axios\r\n      .post(\"http://localhost:4000/articles/modifier\", fd, {\r\n        headers: {\r\n          Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n        },\r\n      })\r\n      .then(() => refreshRows());\r\n  };\r\n\r\n  const ajouter = () => {\r\n    const fd = new FormData();\r\n    fd.append(\"nom\", nom);\r\n    fd.append(\"prix\", prix);\r\n    fd.append(\"couleur\", couleur);\r\n    fd.append(\"taille\", taille);\r\n    fd.append(\"description\", description);\r\n    fd.append(\"quantite\", quantite);\r\n    fd.append(\"categorie\", categorie);\r\n    fd.append(\"marque\", marque);\r\n    fd.append(\"image\", image);\r\n    axios\r\n      .post(\"http://localhost:4000/articles/ajouter\", fd, {\r\n        headers: {\r\n          Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n        },\r\n      })\r\n      .then(() => refreshRows());\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshRows();\r\n    axios\r\n      .post(\"http://localhost:4000/categories/recherche\", {})\r\n      .then((resultat) => {\r\n        resultat.data.forEach((d) =>\r\n          setCategories((categorie) => [...categorie, { title: d.nom }])\r\n        );\r\n      });\r\n    axios\r\n      .post(\"http://localhost:4000/marques/recherche\", {})\r\n      .then((resultat) => {\r\n        resultat.data.forEach((d) =>\r\n          setMarques((marque) => [...marque, { title: d.nom }])\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        onClose={() => {\r\n          setOpen(false);\r\n        }}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Ajouter Article</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            type=\"file\"\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            fullWidth\r\n            onChange={(event) => {\r\n              setImage(event.target.files[0]);\r\n            }}\r\n          ></TextField>\r\n          <TextField\r\n            value={nom}\r\n            onChange={(event) => {\r\n              setNom(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"nom\"\r\n            label=\"Nom\"\r\n            name=\"nom\"\r\n            autoComplete=\"nom\"\r\n          />\r\n          <TextField\r\n            value={prix}\r\n            onChange={(event) => {\r\n              setPrix(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"prix\"\r\n            label=\"Prix\"\r\n            name=\"prix\"\r\n            autoComplete=\"prix\"\r\n          />\r\n          <TextField\r\n            value={quantite}\r\n            onChange={(event) => {\r\n              setQuantite(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"quantite\"\r\n            label=\"Quantite\"\r\n            name=\"quantite\"\r\n            autoComplete=\"quantite\"\r\n          />\r\n          <Autocomplete\r\n            className={classes.spacing}\r\n            defaultValue={{ title: categorie }}\r\n            id=\"categorie\"\r\n            onInputChange={(event, value) => setCategorie(value)}\r\n            options={categories}\r\n            getOptionLabel={(option) => option.title}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Categorie\"\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n              />\r\n            )}\r\n          />\r\n          <Autocomplete\r\n            className={classes.spacing}\r\n            id=\"categorie\"\r\n            onInputChange={(event, value) => setMarque(value)}\r\n            defaultValue={{ title: marque }}\r\n            options={marques}\r\n            getOptionLabel={(option) => option.title}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Marque\"\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n              />\r\n            )}\r\n          />\r\n          <TextField\r\n            value={couleur}\r\n            onChange={(event) => {\r\n              setCouleur(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"couleur\"\r\n            label=\"Couleur\"\r\n            name=\"couleur\"\r\n            autoComplete=\"couleur\"\r\n          />\r\n          <TextField\r\n            value={taille}\r\n            onChange={(event) => {\r\n              setTaille(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"taille\"\r\n            label=\"Taille\"\r\n            name=\"taille\"\r\n            autoComplete=\"taille\"\r\n          />\r\n          <TextField\r\n            value={description}\r\n            multiline=\"true\"\r\n            onChange={(event) => {\r\n              setDescription(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"description\"\r\n            label=\"Description\"\r\n            name=\"description\"\r\n            autoComplete=\"description\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              if (id === \"\") {\r\n                ajouter();\r\n              } else {\r\n                modifier();\r\n              }\r\n            }}\r\n          >\r\n            Confirmer\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Annuler\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Button\r\n        color=\"primary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setOpen(true);\r\n          setId(\"\");\r\n          setNom(\"\");\r\n          setPrix(\"\");\r\n          setDescription(\"\");\r\n          setQuantite(\"\");\r\n          setCouleur(\"\");\r\n          setTaille(\"\");\r\n          setMarque(\"\");\r\n          setCategorie(\"\");\r\n          setImage(null);\r\n        }}\r\n      >\r\n        Ajouter Article\r\n      </Button>\r\n      <TableContainer component={Paper}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell align=\"center\">Image</TableCell>\r\n              <TableCell>Nom</TableCell>\r\n              <TableCell>Prix</TableCell>\r\n              <TableCell>Quantité</TableCell>\r\n              <TableCell>Date de création</TableCell>\r\n              <TableCell align=\"center\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => (\r\n              <TableRow>\r\n                <TableCell>{row._id}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <img alt={row.nom} src={row.image} className={classes.image} ></img>\r\n                </TableCell>\r\n                <TableCell>{row.nom}</TableCell>\r\n                <TableCell>{row.prix}</TableCell>\r\n                <TableCell>{row.quantite}</TableCell>\r\n                <TableCell>{row.cree}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setOpen(true);\r\n                      setId(row._id);\r\n                      setNom(row.nom);\r\n                      setPrix(row.prix);\r\n                      setDescription(row.description);\r\n                      setQuantite(row.quantite);\r\n                      setCouleur(row.couleur);\r\n                      setTaille(row.taille);\r\n                      setMarque(row.marque);\r\n                      setCategorie(row.categorie);\r\n                    }}\r\n                  >\r\n                    Modifier\r\n                  </Button>\r\n                  <Button\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      axios\r\n                        .post(\r\n                          \"http://localhost:4000/articles/supprimer\",\r\n                          {\r\n                            _id: row._id,\r\n                          },\r\n                          {\r\n                            headers: {\r\n                              Authorization:\r\n                                \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                            },\r\n                          }\r\n                        )\r\n                        .then(() => {\r\n                          refreshRows();\r\n                        });\r\n                    }}\r\n                  >\r\n                    Supprimer\r\n                  </Button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}