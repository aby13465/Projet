{"ast":null,"code":"import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Avatar from\"@material-ui/core/Avatar\";import Button from\"@material-ui/core/Button\";import CssBaseline from\"@material-ui/core/CssBaseline\";import TextField from\"@material-ui/core/TextField\";import LockOutlinedIcon from\"@material-ui/icons/LockOutlined\";import Typography from\"@material-ui/core/Typography\";import Alert from\"@material-ui/lab/Alert\";import{makeStyles}from\"@material-ui/core/styles\";import Container from\"@material-ui/core/Container\";import axios from\"axios\";var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function Connexion(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),passe=_useState4[0],setPasse=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),alert=_useState6[0],setAlert=_useState6[1];var handleSubmit=function handleSubmit(event){event.preventDefault();if(email===\"\"||passe===\"\"){setAlert(function(){return React.createElement(Alert,{severity:\"error\"},\"Veuillez remplir tous vos coordonnees\");});setTimeout(function(){setAlert(\"\");},5000);}else{axios.post(\"http://localhost:4000/clients/authentification\",{email:email,passe:passe}).then(function(resultat){if(!(resultat.data===\"Email ou Mot de passe non valide\")){localStorage.setItem(\"jwt-cookie\",resultat.data);}else{setAlert(function(){return React.createElement(Alert,{severity:\"error\"},resultat.data);});setTimeout(function(){setAlert(\"\");},5000);}}).then(function(){if(localStorage.getItem(\"jwt-cookie\"))window.location=\"/\";});}};var classes=useStyles();return React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},React.createElement(CssBaseline,null),React.createElement(\"div\",{className:classes.paper},React.createElement(Avatar,{className:classes.avatar},React.createElement(LockOutlinedIcon,null)),React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Connexion\"),React.createElement(\"form\",{onSubmit:handleSubmit,className:classes.form,noValidate:true},alert,React.createElement(TextField,{value:email,onChange:function onChange(event){return setEmail(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"email\",label:\"Email\",name:\"email\",autoComplete:\"email\",autoFocus:true}),React.createElement(TextField,{value:passe,onChange:function onChange(event){return setPasse(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"passe\",label:\"Mot de passe\",type:\"password\",id:\"passe\",autoComplete:\"passe\"}),React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit},\"Connexion\"))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Connexion/Connexion.js"],"names":["React","useState","Avatar","Button","CssBaseline","TextField","LockOutlinedIcon","Typography","Alert","makeStyles","Container","axios","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","Connexion","email","setEmail","passe","setPasse","alert","setAlert","handleSubmit","event","preventDefault","setTimeout","post","then","resultat","data","localStorage","setItem","getItem","window","location","classes","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport axios from \"axios\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\"\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main\r\n  },\r\n  form: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1)\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2)\r\n  }\r\n}));\r\n\r\nexport default function Connexion() {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [passe, setPasse] = useState(\"\");\r\n  const [alert, setAlert] = useState(\"\");\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n    if (email === \"\" || passe === \"\") {\r\n      setAlert(() => (\r\n        <Alert severity=\"error\">Veuillez remplir tous vos coordonnees</Alert>\r\n      ));\r\n      setTimeout(() => {\r\n        setAlert(\"\");\r\n      }, 5000);\r\n    } else {\r\n      axios\r\n        .post(\"http://localhost:4000/clients/authentification\", {\r\n          email: email,\r\n          passe: passe\r\n        })\r\n        .then(resultat => {\r\n          if (!(resultat.data === \"Email ou Mot de passe non valide\")) {\r\n            localStorage.setItem(\"jwt-cookie\", resultat.data);\r\n          } else {\r\n            setAlert(() => <Alert severity=\"error\">{resultat.data}</Alert>);\r\n            setTimeout(() => {\r\n              setAlert(\"\");\r\n            }, 5000);\r\n          }\r\n        })\r\n        .then(() => {\r\n          if (localStorage.getItem(\"jwt-cookie\")) window.location = \"/\";\r\n        });\r\n    }\r\n  };\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Connexion\r\n        </Typography>\r\n        <form onSubmit={handleSubmit} className={classes.form} noValidate>\r\n          {alert}\r\n          <TextField\r\n            value={email}\r\n            onChange={event => setEmail(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            value={passe}\r\n            onChange={event => setPasse(event.target.value)}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"passe\"\r\n            label=\"Mot de passe\"\r\n            type=\"password\"\r\n            id=\"passe\"\r\n            autoComplete=\"passe\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Connexion\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}