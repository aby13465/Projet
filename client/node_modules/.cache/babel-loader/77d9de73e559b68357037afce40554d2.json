{"ast":null,"code":"import _toConsumableArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import axios from\"axios\";import{Paper,Table,TableCell,TableContainer,TableHead,TableRow,TableBody,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button}from\"@material-ui/core\";import{Autocomplete}from\"@material-ui/lab\";var useStyles=makeStyles(function(theme){return{table:{minWidth:650},btnSpacing:{margin:theme.spacing(0,1,1,0)}};});export default function Articles(){var classes=useStyles();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),marques=_useState6[0],setMarques=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),id=_useState8[0],setId=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),nom=_useState10[0],setNom=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),prix=_useState12[0],setPrix=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),categorie=_useState14[0],setCategorie=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),marque=_useState16[0],setMarque=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),quantite=_useState18[0],setQuantite=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),description=_useState20[0],setDescription=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),couleur=_useState22[0],setCouleur=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),taille=_useState24[0],setTaille=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),open=_useState26[0],setOpen=_useState26[1];var refreshRows=function refreshRows(){axios.post(\"http://localhost:4000/articles/recherche\",{}).then(function(resultat){setRows(resultat.data);});};useEffect(function(){refreshRows();axios.post(\"http://localhost:4000/categories/recherche\",{}).then(function(resultat){resultat.data.forEach(function(d){return setCategories(function(categorie){return[].concat(_toConsumableArray(categorie),[{title:d.nom}]);});});});axios.post(\"http://localhost:4000/marques/recherche\",{}).then(function(resultat){resultat.data.forEach(function(d){return setMarques(function(marque){return[].concat(_toConsumableArray(marque),[{title:d.nom}]);});});});},[]);return React.createElement(\"div\",null,React.createElement(Dialog,{open:open,fullWidth:true,onClose:function onClose(){setOpen(false);setId(\"\");setNom(\"\");setPrix(\"\");setDescription(\"\");setQuantite(\"\");setCouleur(\"\");setTaille(\"\");setMarque(\"\");setCategorie(\"\");},\"aria-labelledby\":\"form-dialog-title\"},React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Ajouter Article\"),React.createElement(DialogContent,null,React.createElement(TextField,{value:nom,onChange:function onChange(event){setNom(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"nom\",label:\"Nom\",name:\"nom\",autoComplete:\"nom\"}),React.createElement(TextField,{value:prix,onChange:function onChange(event){setPrix(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"prix\",label:\"Prix\",name:\"prix\",autoComplete:\"prix\"}),React.createElement(TextField,{value:quantite,onChange:function onChange(event){setQuantite(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"quantite\",label:\"Quantite\",name:\"quantite\",autoComplete:\"quantite\"}),React.createElement(Autocomplete,{className:classes.spacing,defaultValue:{title:categorie},id:\"categorie\",onInputChange:function onInputChange(event,value){return setCategorie(value);},options:categories,getOptionLabel:function getOptionLabel(option){return option.title;},renderInput:function renderInput(params){return React.createElement(TextField,Object.assign({},params,{label:\"Categorie\",margin:\"normal\",variant:\"outlined\"}));}}),React.createElement(Autocomplete,{className:classes.spacing,id:\"categorie\",onInputChange:function onInputChange(event,value){return setMarque(value);},defaultValue:{title:marque},options:marques,getOptionLabel:function getOptionLabel(option){return option.title;},renderInput:function renderInput(params){return React.createElement(TextField,Object.assign({},params,{label:\"Marque\",margin:\"normal\",variant:\"outlined\"}));}}),React.createElement(TextField,{value:couleur,onChange:function onChange(event){setCouleur(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"couleur\",label:\"Couleur\",name:\"couleur\",autoComplete:\"couleur\"}),React.createElement(TextField,{value:taille,onChange:function onChange(event){setTaille(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"taille\",label:\"Taille\",name:\"taille\",autoComplete:\"taille\"}),React.createElement(TextField,{value:description,multiline:\"true\",onChange:function onChange(event){setDescription(event.target.value);},variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"description\",label:\"Description\",name:\"description\",autoComplete:\"description\"})),React.createElement(DialogActions,null,React.createElement(Button,{color:\"primary\",onClick:function onClick(){if(id===\"\"){axios.post(\"http://localhost:4000/articles/ajouter\",{nom:nom,prix:prix,couleur:couleur,taille:taille,description:description,quantite:quantite,categorie:categorie,marque:marque},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){setRows([]);refreshRows();});}else{axios.post(\"http://localhost:4000/articles/modifier\",{_id:id,nom:nom,prix:prix,couleur:couleur,taille:taille,description:description,quantite:quantite,categorie:categorie,marque:marque},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){setRows([]);refreshRows();});}setOpen(false);}},\"Confirmer\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){setOpen(false);}},\"Annuler\"))),React.createElement(Button,{color:\"primary\",className:classes.btnSpacing,onClick:function onClick(){setOpen(true);}},\"Ajouter Article\"),React.createElement(TableContainer,{component:Paper},React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"ID\"),React.createElement(TableCell,null,\"Nom\"),React.createElement(TableCell,null,\"Prix\"),React.createElement(TableCell,null,\"Quantit\\xE9\"),React.createElement(TableCell,null,\"Date de cr\\xE9ation\"),React.createElement(TableCell,{align:\"center\"},\"Actions\"))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,null,React.createElement(TableCell,null,row._id),React.createElement(TableCell,null,row.nom),React.createElement(TableCell,null,row.prix),React.createElement(TableCell,null,row.quantite),React.createElement(TableCell,null,row.cree),React.createElement(TableCell,{align:\"center\"},React.createElement(Button,{color:\"primary\",onClick:function onClick(){setOpen(true);setId(row._id);setNom(row.nom);setPrix(row.prix);setDescription(row.description);setQuantite(row.quantite);setCouleur(row.couleur);setTaille(row.taille);setMarque(row.marque);setCategorie(row.categorie);}},\"Modifier\"),React.createElement(Button,{color:\"secondary\",onClick:function onClick(){axios.post(\"http://localhost:4000/articles/supprimer\",{_id:row._id},{headers:{Authorization:\"bearer \"+localStorage.getItem(\"jwt-cookie\")}}).then(function(){setRows([]);refreshRows();});}},\"Supprimer\")));})))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Articles/Articles.js"],"names":["React","useEffect","useState","makeStyles","axios","Paper","Table","TableCell","TableContainer","TableHead","TableRow","TableBody","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","Autocomplete","useStyles","theme","table","minWidth","btnSpacing","margin","spacing","Articles","classes","rows","setRows","categories","setCategories","marques","setMarques","id","setId","nom","setNom","prix","setPrix","categorie","setCategorie","marque","setMarque","quantite","setQuantite","description","setDescription","couleur","setCouleur","taille","setTaille","open","setOpen","refreshRows","post","then","resultat","data","forEach","d","title","event","target","value","option","params","headers","Authorization","localStorage","getItem","_id","map","row","cree"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Paper,\r\n  Table,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TableBody,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n} from \"@material-ui/core\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  btnSpacing: {\r\n    margin: theme.spacing(0, 1, 1, 0),\r\n  },\r\n}));\r\n\r\nexport default function Articles() {\r\n  const classes = useStyles();\r\n  const [rows, setRows] = useState([]);\r\n  const [categories, setCategories] = useState(\"\");\r\n  const [marques, setMarques] = useState(\"\");\r\n  const [id, setId] = useState(\"\");\r\n  const [nom, setNom] = useState(\"\");\r\n  const [prix, setPrix] = useState(\"\");\r\n  const [categorie, setCategorie] = useState(\"\");\r\n  const [marque, setMarque] = useState(\"\");\r\n  const [quantite, setQuantite] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [couleur, setCouleur] = useState(\"\");\r\n  const [taille, setTaille] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const refreshRows = () => {\r\n    axios\r\n      .post(\"http://localhost:4000/articles/recherche\", {})\r\n      .then((resultat) => {\r\n        setRows(resultat.data);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    refreshRows();\r\n    axios\r\n      .post(\"http://localhost:4000/categories/recherche\", {})\r\n      .then((resultat) => {\r\n        resultat.data.forEach((d) =>\r\n          setCategories((categorie) => [...categorie, { title: d.nom }])\r\n        );\r\n      });\r\n    axios\r\n      .post(\"http://localhost:4000/marques/recherche\", {})\r\n      .then((resultat) => {\r\n        resultat.data.forEach((d) =>\r\n          setMarques((marque) => [...marque, { title: d.nom }])\r\n        );\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Dialog\r\n        open={open}\r\n        fullWidth\r\n        onClose={() => {\r\n          setOpen(false);\r\n          setId(\"\");\r\n          setNom(\"\");\r\n          setPrix(\"\");\r\n          setDescription(\"\");\r\n          setQuantite(\"\");\r\n          setCouleur(\"\");\r\n          setTaille(\"\");\r\n          setMarque(\"\");\r\n          setCategorie(\"\");\r\n        }}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Ajouter Article</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            value={nom}\r\n            onChange={(event) => {\r\n              setNom(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"nom\"\r\n            label=\"Nom\"\r\n            name=\"nom\"\r\n            autoComplete=\"nom\"\r\n          />\r\n          <TextField\r\n            value={prix}\r\n            onChange={(event) => {\r\n              setPrix(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"prix\"\r\n            label=\"Prix\"\r\n            name=\"prix\"\r\n            autoComplete=\"prix\"\r\n          />\r\n          <TextField\r\n            value={quantite}\r\n            onChange={(event) => {\r\n              setQuantite(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"quantite\"\r\n            label=\"Quantite\"\r\n            name=\"quantite\"\r\n            autoComplete=\"quantite\"\r\n          />\r\n          <Autocomplete\r\n            className={classes.spacing}\r\n            defaultValue={{ title: categorie }}\r\n            id=\"categorie\"\r\n            onInputChange={(event, value) => setCategorie(value)}\r\n            options={categories}\r\n            getOptionLabel={(option) => option.title}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Categorie\"\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n              />\r\n            )}\r\n          />\r\n          <Autocomplete\r\n            className={classes.spacing}\r\n            id=\"categorie\"\r\n            onInputChange={(event, value) => setMarque(value)}\r\n            defaultValue={{ title: marque }}\r\n            options={marques}\r\n            getOptionLabel={(option) => option.title}\r\n            renderInput={(params) => (\r\n              <TextField\r\n                {...params}\r\n                label=\"Marque\"\r\n                margin=\"normal\"\r\n                variant=\"outlined\"\r\n              />\r\n            )}\r\n          />\r\n          <TextField\r\n            value={couleur}\r\n            onChange={(event) => {\r\n              setCouleur(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"couleur\"\r\n            label=\"Couleur\"\r\n            name=\"couleur\"\r\n            autoComplete=\"couleur\"\r\n          />\r\n          <TextField\r\n            value={taille}\r\n            onChange={(event) => {\r\n              setTaille(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"taille\"\r\n            label=\"Taille\"\r\n            name=\"taille\"\r\n            autoComplete=\"taille\"\r\n          />\r\n          <TextField\r\n            value={description}\r\n            multiline=\"true\"\r\n            onChange={(event) => {\r\n              setDescription(event.target.value);\r\n            }}\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"description\"\r\n            label=\"Description\"\r\n            name=\"description\"\r\n            autoComplete=\"description\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            color=\"primary\"\r\n            onClick={() => {\r\n              if (id === \"\") {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/articles/ajouter\",\r\n                    {\r\n                      nom,\r\n                      prix,\r\n                      couleur,\r\n                      taille,\r\n                      description,\r\n                      quantite,\r\n                      categorie,\r\n                      marque,\r\n                    },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setRows([]);\r\n                    refreshRows();\r\n                  });\r\n              } else {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/articles/modifier\",\r\n                    {\r\n                      _id: id,\r\n                      nom,\r\n                      prix,\r\n                      couleur,\r\n                      taille,\r\n                      description,\r\n                      quantite,\r\n                      categorie,\r\n                      marque,\r\n                    },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setRows([]);\r\n                    refreshRows();\r\n                  });\r\n              }\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Confirmer\r\n          </Button>\r\n          <Button\r\n            color=\"secondary\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Annuler\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      <Button\r\n        color=\"primary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setOpen(true);\r\n        }}\r\n      >\r\n        Ajouter Article\r\n      </Button>\r\n      <TableContainer component={Paper}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Nom</TableCell>\r\n              <TableCell>Prix</TableCell>\r\n              <TableCell>Quantité</TableCell>\r\n              <TableCell>Date de création</TableCell>\r\n              <TableCell align=\"center\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {rows.map((row) => (\r\n              <TableRow>\r\n                <TableCell>{row._id}</TableCell>\r\n                <TableCell>{row.nom}</TableCell>\r\n                <TableCell>{row.prix}</TableCell>\r\n                <TableCell>{row.quantite}</TableCell>\r\n                <TableCell>{row.cree}</TableCell>\r\n                <TableCell align=\"center\">\r\n                  <Button\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      setOpen(true);\r\n                      setId(row._id);\r\n                      setNom(row.nom);\r\n                      setPrix(row.prix);\r\n                      setDescription(row.description);\r\n                      setQuantite(row.quantite);\r\n                      setCouleur(row.couleur);\r\n                      setTaille(row.taille);\r\n                      setMarque(row.marque);\r\n                      setCategorie(row.categorie);\r\n                    }}\r\n                  >\r\n                    Modifier\r\n                  </Button>\r\n                  <Button\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      axios\r\n                        .post(\r\n                          \"http://localhost:4000/articles/supprimer\",\r\n                          {\r\n                            _id: row._id,\r\n                          },\r\n                          {\r\n                            headers: {\r\n                              Authorization:\r\n                                \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                            },\r\n                          }\r\n                        )\r\n                        .then(() => {\r\n                          setRows([]);\r\n                          refreshRows();\r\n                        });\r\n                    }}\r\n                  >\r\n                    Supprimer\r\n                  </Button>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}