{"ast":null,"code":"import _defineProperty from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:\\\\projetpfe\\\\front-end\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import clsx from\"clsx\";import{ClickAwayListener,Grow,Paper,Popper,MenuItem,MenuList}from\"@material-ui/core\";import{AppBar,Toolbar,Button,IconButton}from\"@material-ui/core\";import{HomeRounded,ShoppingCartRounded,AccountCircleRounded,MenuRounded}from\"@material-ui/icons\";export default function NavBar(props){var Auth=localStorage.getItem(\"jwt-cookie\");var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var anchorRef=useRef(null);var handleToggle=function handleToggle(){setOpen(function(prevOpen){return!prevOpen;});};var handleClose=function handleClose(event){if(anchorRef.current&&anchorRef.current.contains(event.target)){return;}setOpen(false);};function handleListKeyDown(event){if(event.key===\"Tab\"){event.preventDefault();setOpen(false);}}var prevOpen=useRef(open);useEffect(function(){if(prevOpen.current===true&&open===false){anchorRef.current.focus();}prevOpen.current=open;},[open]);var moderateurLinks=function moderateurLinks(){if(props.mod){return React.createElement(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",onClick:props.handleDrawerOpen,edge:\"start\",className:clsx(props.classes.menuButton,props.open&&props.classes.hide)},React.createElement(MenuRounded,null));}};var clientLinks=React.createElement(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown},React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Historique\";setOpen(false);},color:\"inherit\"},\"Historique\"),React.createElement(MenuItem,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.location=\"/Compte\";setOpen(false);case 2:case\"end\":return _context.stop();}}},_callee);})),color:\"inherit\"},\"Compte\"),React.createElement(MenuItem,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return localStorage.removeItem(\"jwt-cookie\");case 2:window.location=\"/Connexion\";case 3:case\"end\":return _context2.stop();}}},_callee2);})),color:\"inherit\"},\"D\\xE9connexion\"));var visiteurLinks=React.createElement(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown},React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Inscription\";setOpen(false);},color:\"inherit\"},\"Inscription\"),React.createElement(MenuItem,{onClick:function onClick(){window.location=\"/Connexion\";setOpen(false);},color:\"inherit\"},\"Connexion\"));return React.createElement(\"div\",{className:props.classes.root},React.createElement(AppBar,{position:\"static\",className:clsx(props.classes.appBar,_defineProperty({},props.classes.appBarShift,props.open))},React.createElement(Toolbar,null,moderateurLinks(),React.createElement(Button,{onClick:function onClick(){window.location=\"/\";},color:\"inherit\"},\"BNB Booking\"),React.createElement(\"div\",{className:props.classes.title}),React.createElement(Button,{onClick:function onClick(){window.location=\"/\";},color:\"inherit\"},React.createElement(HomeRounded,null)),React.createElement(Button,{ref:anchorRef,\"aria-controls\":open?\"menu-list-grow\":undefined,\"aria-haspopup\":\"true\",onClick:handleToggle,color:\"inherit\"},React.createElement(AccountCircleRounded,null)),React.createElement(Popper,{open:open,anchorEl:anchorRef.current,role:undefined,transition:true,disablePortal:true},function(_ref3){var TransitionProps=_ref3.TransitionProps,placement=_ref3.placement;return React.createElement(Grow,Object.assign({},TransitionProps,{style:{transformOrigin:placement===\"bottom\"?\"center top\":\"center bottom\"}}),React.createElement(Paper,null,React.createElement(ClickAwayListener,{onClickAway:handleClose},Auth?clientLinks:visiteurLinks)));}),React.createElement(Button,{onClick:function onClick(){window.location=\"/Panier\";},color:\"inherit\"},React.createElement(ShoppingCartRounded,null)))));}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/NavBar/NavBar.js"],"names":["React","useState","useEffect","useRef","clsx","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","AppBar","Toolbar","Button","IconButton","HomeRounded","ShoppingCartRounded","AccountCircleRounded","MenuRounded","NavBar","props","Auth","localStorage","getItem","open","setOpen","anchorRef","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","focus","moderateurLinks","mod","handleDrawerOpen","classes","menuButton","hide","clientLinks","window","location","removeItem","visiteurLinks","root","appBar","appBarShift","title","undefined","TransitionProps","placement","transformOrigin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport {\r\n  ClickAwayListener,\r\n  Grow,\r\n  Paper,\r\n  Popper,\r\n  MenuItem,\r\n  MenuList,\r\n} from \"@material-ui/core\";\r\nimport { AppBar, Toolbar, Button, IconButton } from \"@material-ui/core\";\r\nimport {\r\n  HomeRounded,\r\n  ShoppingCartRounded,\r\n  AccountCircleRounded,\r\n  MenuRounded,\r\n} from \"@material-ui/icons\";\r\n\r\nexport default function NavBar(props) {\r\n  const Auth = localStorage.getItem(\"jwt-cookie\");\r\n  const [open, setOpen] = useState(false);\r\n  const anchorRef = useRef(null);\r\n\r\n  const handleToggle = () => {\r\n    setOpen((prevOpen) => !prevOpen);\r\n  };\r\n  const handleClose = (event) => {\r\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n  function handleListKeyDown(event) {\r\n    if (event.key === \"Tab\") {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n  const prevOpen = useRef(open);\r\n  useEffect(() => {\r\n    if (prevOpen.current === true && open === false) {\r\n      anchorRef.current.focus();\r\n    }\r\n\r\n    prevOpen.current = open;\r\n  }, [open]);\r\n\r\n  const moderateurLinks = () => {\r\n    if (props.mod) {\r\n      return (\r\n        <IconButton\r\n          color=\"inherit\"\r\n          aria-label=\"open drawer\"\r\n          onClick={props.handleDrawerOpen}\r\n          edge=\"start\"\r\n          className={clsx(\r\n            props.classes.menuButton,\r\n            props.open && props.classes.hide\r\n          )}\r\n        >\r\n          <MenuRounded />\r\n        </IconButton>\r\n      );\r\n    }\r\n  };\r\n\r\n  const clientLinks = (\r\n    <MenuList\r\n      autoFocusItem={open}\r\n      id=\"menu-list-grow\"\r\n      onKeyDown={handleListKeyDown}\r\n    >\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Historique\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Historique\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={async () => {\r\n          window.location = \"/Compte\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Compte\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={async () => {\r\n          await localStorage.removeItem(\"jwt-cookie\");\r\n          window.location = \"/Connexion\";\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Déconnexion\r\n      </MenuItem>\r\n    </MenuList>\r\n  );\r\n  const visiteurLinks = (\r\n    <MenuList\r\n      autoFocusItem={open}\r\n      id=\"menu-list-grow\"\r\n      onKeyDown={handleListKeyDown}\r\n    >\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Inscription\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Inscription\r\n      </MenuItem>\r\n      <MenuItem\r\n        onClick={() => {\r\n          window.location = \"/Connexion\";\r\n          setOpen(false);\r\n        }}\r\n        color=\"inherit\"\r\n      >\r\n        Connexion\r\n      </MenuItem>\r\n    </MenuList>\r\n  );\r\n\r\n  return (\r\n    <div className={props.classes.root}>\r\n      <AppBar\r\n        position=\"static\"\r\n        className={clsx(props.classes.appBar, {\r\n          [props.classes.appBarShift]: props.open,\r\n        })}\r\n      >\r\n        <Toolbar>\r\n          {moderateurLinks()}\r\n          <Button\r\n            onClick={() => {\r\n              window.location = \"/\";\r\n            }}\r\n            color=\"inherit\"\r\n          >\r\n            BNB Booking\r\n          </Button>\r\n          <div className={props.classes.title}></div>\r\n          <Button\r\n            onClick={() => {\r\n              window.location = \"/\";\r\n            }}\r\n            color=\"inherit\"\r\n          >\r\n            <HomeRounded />\r\n          </Button>\r\n          <Button\r\n            ref={anchorRef}\r\n            aria-controls={open ? \"menu-list-grow\" : undefined}\r\n            aria-haspopup=\"true\"\r\n            onClick={handleToggle}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircleRounded />\r\n          </Button>\r\n          <Popper\r\n            open={open}\r\n            anchorEl={anchorRef.current}\r\n            role={undefined}\r\n            transition\r\n            disablePortal\r\n          >\r\n            {({ TransitionProps, placement }) => (\r\n              <Grow\r\n                {...TransitionProps}\r\n                style={{\r\n                  transformOrigin:\r\n                    placement === \"bottom\" ? \"center top\" : \"center bottom\",\r\n                }}\r\n              >\r\n                <Paper>\r\n                  <ClickAwayListener onClickAway={handleClose}>\r\n                    {Auth ? clientLinks : visiteurLinks}\r\n                  </ClickAwayListener>\r\n                </Paper>\r\n              </Grow>\r\n            )}\r\n          </Popper>\r\n          <Button\r\n            onClick={() => {\r\n              window.location = \"/Panier\";\r\n            }}\r\n            color=\"inherit\"\r\n          >\r\n            <ShoppingCartRounded />\r\n          </Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}