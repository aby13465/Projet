{"ast":null,"code":"var _jsxFileName = \"E:\\\\projetpfe\\\\front-end\\\\src\\\\Commandes\\\\Commandes.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport axios from \"axios\";\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Typography, Button } from \"@material-ui/core\";\nconst useStyles = makeStyles(theme => ({\n  table: {\n    minWidth: 650\n  },\n  btnSpacing: {\n    margin: theme.spacing(0, 2, 2, 2)\n  }\n}));\nexport default function Commandes() {\n  const classes = useStyles();\n  const [etat, setEtat] = useState(\"en Attente\");\n  const [data, setData] = useState([]);\n\n  const Buttons = d => {\n    switch (etat) {\n      case \"en Attente\":\n        return React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"primary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/changeretat\", {\n              _id: d._id,\n              etat: \"Confirmé\"\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(resultat => {\n              setEtat(\"Confirmé\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, \"Confirmer\"), React.createElement(Button, {\n          color: \"secondary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/changeretat\", {\n              _id: d._id,\n              etat: \"Annulé\"\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(resultat => {\n              setEtat(\"Annulé\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, \"Annuler\"));\n\n      case \"Confirmé\":\n        return React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"primary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/changeretat\", {\n              _id: d._id,\n              etat: \"Livré\"\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(resultat => {\n              setEtat(\"Livré\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Livr\\xE9\"), React.createElement(Button, {\n          color: \"secondary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/changeretat\", {\n              _id: d._id,\n              etat: \"Annulé\"\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(() => {\n              setEtat(\"Annulé\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Annuler\"));\n\n      case \"Annulé\":\n        return React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"primary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/changeretat\", {\n              _id: d._id,\n              etat: \"Confirmé\"\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(() => {\n              setEtat(\"Confirmé\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, \"Confirmer\"), React.createElement(Button, {\n          color: \"secondary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/supprimer\", {\n              _id: d._id\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(() => {\n              setEtat(\"Confirmé\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, \"Supprimer\"));\n\n      case \"Livré\":\n        return React.createElement(TableCell, {\n          align: \"center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"secondary\",\n          onClick: () => {\n            axios.post(\"http://localhost:4000/commandes/supprimer\", {\n              _id: d._id\n            }, {\n              headers: {\n                Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n              }\n            }).then(() => {\n              setEtat(\"en Attente\");\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }, \"Supprimer\"));\n\n      default:\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        });\n    }\n  };\n\n  useEffect(() => {\n    setData([]);\n    axios.post(\"http://localhost:4000/commandes/recherche\", {\n      etat\n    }, {\n      headers: {\n        Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n      }\n    }).then(resultat => {\n      resultat.data.forEach(r => {\n        setData(d => [...d, {\n          _id: r._id,\n          adresse: r.adresse,\n          client: r.client,\n          liste: r.liste,\n          prix: r.prix,\n          etat: r.etat,\n          cree: r.cree\n        }]);\n      });\n    });\n  }, [etat]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, React.createElement(Button, {\n    color: \"secondary\",\n    className: classes.btnSpacing,\n    onClick: () => {\n      setEtat(\"en Attente\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }, \"en Attente\"), React.createElement(Button, {\n    color: \"secondary\",\n    className: classes.btnSpacing,\n    onClick: () => {\n      setEtat(\"Confirmé\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, \"Confirm\\xE9s\"), React.createElement(Button, {\n    color: \"secondary\",\n    className: classes.btnSpacing,\n    onClick: () => {\n      setEtat(\"Annulé\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, \"Annul\\xE9s\"), React.createElement(Button, {\n    color: \"secondary\",\n    className: classes.btnSpacing,\n    onClick: () => {\n      setEtat(\"Livré\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, \"Livr\\xE9s\"), React.createElement(TableContainer, {\n    component: Paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, \"Client\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, \"Liste des Articles\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, \"PrixTotal\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278\n    },\n    __self: this\n  }, \"Adresse\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  }, \"Date\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280\n    },\n    __self: this\n  }, \"Etat\"), React.createElement(TableCell, {\n    align: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }, \"Actions\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284\n    },\n    __self: this\n  }, data.map(d => React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288\n    },\n    __self: this\n  }, \"ID: \", d.client._id), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289\n    },\n    __self: this\n  }, \"Nom: \", d.client.nom), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, \"Pr\\xE9nom: \", d.client.prenom), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291\n    },\n    __self: this\n  }, \"E-mail: \", d.client.email), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }, \"T\\xE9l\\xE9phone: \", d.client.telephone)), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }, d.liste.map(l => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, l.nom, \" x\", l.quantite, \" : \", l.prix, \" DT\"))), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, d.prix, \" DT\"), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, d.adresse), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, d.cree), React.createElement(TableCell, {\n    align: \"left\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304\n    },\n    __self: this\n  }, d.etat), Buttons(d)))))));\n}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Commandes/Commandes.js"],"names":["React","useState","useEffect","makeStyles","axios","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Typography","Button","useStyles","theme","table","minWidth","btnSpacing","margin","spacing","Commandes","classes","etat","setEtat","data","setData","Buttons","d","post","_id","headers","Authorization","localStorage","getItem","then","resultat","forEach","r","adresse","client","liste","prix","cree","map","nom","prenom","email","telephone","l","quantite"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n  btnSpacing: {\r\n    margin: theme.spacing(0, 2, 2, 2),\r\n  },\r\n}));\r\n\r\nexport default function Commandes() {\r\n  const classes = useStyles();\r\n  const [etat, setEtat] = useState(\"en Attente\");\r\n  const [data, setData] = useState([]);\r\n\r\n  const Buttons = (d) => {\r\n    switch (etat) {\r\n      case \"en Attente\":\r\n        return (\r\n          <TableCell align=\"center\">\r\n            <Button\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/changeretat\",\r\n                    { _id: d._id, etat: \"Confirmé\" },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then((resultat) => {\r\n                    setEtat(\"Confirmé\");\r\n                  });\r\n              }}\r\n            >\r\n              Confirmer\r\n            </Button>\r\n            <Button\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/changeretat\",\r\n                    { _id: d._id, etat: \"Annulé\" },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then((resultat) => {\r\n                    setEtat(\"Annulé\");\r\n                  });\r\n              }}\r\n            >\r\n              Annuler\r\n            </Button>\r\n          </TableCell>\r\n        );\r\n      case \"Confirmé\":\r\n        return (\r\n          <TableCell align=\"center\">\r\n            <Button\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/changeretat\",\r\n                    { _id: d._id, etat: \"Livré\" },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then((resultat) => {\r\n                    setEtat(\"Livré\");\r\n                  });\r\n              }}\r\n            >\r\n              Livré\r\n            </Button>\r\n            <Button\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/changeretat\",\r\n                    { _id: d._id, etat: \"Annulé\" },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setEtat(\"Annulé\");\r\n                  });\r\n              }}\r\n            >\r\n              Annuler\r\n            </Button>\r\n          </TableCell>\r\n        );\r\n      case \"Annulé\":\r\n        return (\r\n          <TableCell align=\"center\">\r\n            <Button\r\n              color=\"primary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/changeretat\",\r\n                    { _id: d._id, etat: \"Confirmé\" },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setEtat(\"Confirmé\");\r\n                  });\r\n              }}\r\n            >\r\n              Confirmer\r\n            </Button>\r\n            <Button\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/supprimer\",\r\n                    { _id: d._id },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setEtat(\"Confirmé\");\r\n                  });\r\n              }}\r\n            >\r\n              Supprimer\r\n            </Button>\r\n          </TableCell>\r\n        );\r\n      case \"Livré\":\r\n        return (\r\n          <TableCell align=\"center\">\r\n            <Button\r\n              color=\"secondary\"\r\n              onClick={() => {\r\n                axios\r\n                  .post(\r\n                    \"http://localhost:4000/commandes/supprimer\",\r\n                    { _id: d._id },\r\n                    {\r\n                      headers: {\r\n                        Authorization:\r\n                          \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n                      },\r\n                    }\r\n                  )\r\n                  .then(() => {\r\n                    setEtat(\"en Attente\");\r\n                  });\r\n              }}\r\n            >\r\n              Supprimer\r\n            </Button>\r\n          </TableCell>\r\n        );\r\n      default:\r\n        return <div></div>;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setData([]);\r\n    axios\r\n      .post(\r\n        \"http://localhost:4000/commandes/recherche\",\r\n        { etat },\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      )\r\n      .then((resultat) => {\r\n        resultat.data.forEach((r) => {\r\n          setData((d) => [\r\n            ...d,\r\n            {\r\n              _id: r._id,\r\n              adresse: r.adresse,\r\n              client: r.client,\r\n              liste: r.liste,\r\n              prix: r.prix,\r\n              etat: r.etat,\r\n              cree: r.cree,\r\n            },\r\n          ]);\r\n        });\r\n      });\r\n  }, [etat]);\r\n  return (\r\n    <div>\r\n      <Button\r\n        color=\"secondary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setEtat(\"en Attente\");\r\n        }}\r\n      >\r\n        en Attente\r\n      </Button>\r\n      <Button\r\n        color=\"secondary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setEtat(\"Confirmé\");\r\n        }}\r\n      >\r\n        Confirmés\r\n      </Button>\r\n      <Button\r\n        color=\"secondary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setEtat(\"Annulé\");\r\n        }}\r\n      >\r\n        Annulés\r\n      </Button>\r\n      <Button\r\n        color=\"secondary\"\r\n        className={classes.btnSpacing}\r\n        onClick={() => {\r\n          setEtat(\"Livré\");\r\n        }}\r\n      >\r\n        Livrés\r\n      </Button>\r\n      <TableContainer component={Paper}>\r\n        <Table className={classes.table} aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"left\">Client</TableCell>\r\n              <TableCell align=\"left\">Liste des Articles</TableCell>\r\n              <TableCell align=\"left\">PrixTotal</TableCell>\r\n              <TableCell align=\"left\">Adresse</TableCell>\r\n              <TableCell align=\"left\">Date</TableCell>\r\n              <TableCell align=\"left\">Etat</TableCell>\r\n              <TableCell align=\"center\">Actions</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {data.map((d) => (\r\n              <TableRow>\r\n                <TableCell align=\"left\">\r\n                  <div>ID: {d.client._id}</div>\r\n                  <div>Nom: {d.client.nom}</div>\r\n                  <div>Prénom: {d.client.prenom}</div>\r\n                  <div>E-mail: {d.client.email}</div>\r\n                  <div>Téléphone: {d.client.telephone}</div>\r\n                </TableCell>\r\n                <TableCell align=\"left\">\r\n                  {d.liste.map((l) => (\r\n                    <div>\r\n                      {l.nom} x{l.quantite} : {l.prix} DT\r\n                    </div>\r\n                  ))}\r\n                </TableCell>\r\n                <TableCell align=\"left\">{d.prix} DT</TableCell>\r\n                <TableCell align=\"left\">{d.adresse}</TableCell>\r\n                <TableCell align=\"left\">{d.cree}</TableCell>\r\n                <TableCell align=\"left\">{d.etat}</TableCell>\r\n                {Buttons(d)}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}