{"ast":null,"code":"var _jsxFileName = \"E:\\\\projetpfe\\\\front-end\\\\src\\\\Commandes\\\\Commandes.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nexport default function Commandes() {\n  const [etat, setEtat] = useState(\"Attente\");\n  const [data, setData] = useState([]);\n  useEffect(() => {\n    async function fetchData() {\n      setData([]);\n      let liste;\n      let prix = 0;\n      const commande = await axios.post(\"http://localhost:4000/commandes/recherche\", {\n        etat\n      }, {\n        headers: {\n          Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n        }\n      });\n      commande.data.forEach(async c => {\n        liste = [];\n        c.liste.forEach(async l => {\n          const article = await axios.get(\"http://localhost:4000/articles/recherche/\" + l._id);\n          liste.push({\n            nom: article.data.nom,\n            prix: article.data.prix,\n            quantite: l.quantite\n          });\n          prix += article.data.prix * l.quantite;\n        });\n        const client = await axios.post(\"http://localhost:4000/clients/recherchesimple\", c._id, {\n          headers: {\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\")\n          }\n        });\n        setData(d => [...d, {\n          _id: c._id,\n          nom: client.data.nom,\n          prenom: client.data.prenom,\n          telephone: client.data.telephone,\n          email: client.data.email,\n          liste: liste,\n          prix: prix\n        }]);\n      }), [];\n    }\n  }, [etat]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, JSON.stringify(data));\n}","map":{"version":3,"sources":["E:/projetpfe/front-end/src/Commandes/Commandes.js"],"names":["React","useState","useEffect","axios","Commandes","etat","setEtat","data","setData","fetchData","liste","prix","commande","post","headers","Authorization","localStorage","getItem","forEach","c","l","article","get","_id","push","nom","quantite","client","d","prenom","telephone","email","JSON","stringify"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,SAAT,GAAqB;AAClC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBL,QAAQ,CAAC,SAAD,CAAhC;AACA,QAAM,CAACM,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,CAAC,EAAD,CAAhC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd,mBAAeO,SAAf,GAA2B;AACzBD,MAAAA,OAAO,CAAC,EAAD,CAAP;AACA,UAAIE,KAAJ;AACA,UAAIC,IAAI,GAAG,CAAX;AACA,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,IAAN,CACrB,2CADqB,EAErB;AAAER,QAAAA;AAAF,OAFqB,EAGrB;AACES,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,YAArB;AADpB;AADX,OAHqB,CAAvB;AASAL,MAAAA,QAAQ,CAACL,IAAT,CAAcW,OAAd,CAAsB,MAAOC,CAAP,IAAa;AACjCT,QAAAA,KAAK,GAAG,EAAR;AACAS,QAAAA,CAAC,CAACT,KAAF,CAAQQ,OAAR,CAAgB,MAAOE,CAAP,IAAa;AAC3B,gBAAMC,OAAO,GAAG,MAAMlB,KAAK,CAACmB,GAAN,CACpB,8CAA8CF,CAAC,CAACG,GAD5B,CAAtB;AAGAb,UAAAA,KAAK,CAACc,IAAN,CAAW;AACTC,YAAAA,GAAG,EAAEJ,OAAO,CAACd,IAAR,CAAakB,GADT;AAETd,YAAAA,IAAI,EAAEU,OAAO,CAACd,IAAR,CAAaI,IAFV;AAGTe,YAAAA,QAAQ,EAAEN,CAAC,CAACM;AAHH,WAAX;AAKAf,UAAAA,IAAI,IAAIU,OAAO,CAACd,IAAR,CAAaI,IAAb,GAAoBS,CAAC,CAACM,QAA9B;AACD,SAVD;AAWA,cAAMC,MAAM,GAAG,MAAMxB,KAAK,CAACU,IAAN,CACnB,+CADmB,EAEnBM,CAAC,CAACI,GAFiB,EAGnB;AACET,UAAAA,OAAO,EAAE;AACPC,YAAAA,aAAa,EAAE,YAAYC,YAAY,CAACC,OAAb,CAAqB,YAArB;AADpB;AADX,SAHmB,CAArB;AASAT,QAAAA,OAAO,CAAEoB,CAAD,IAAO,CACb,GAAGA,CADU,EAEb;AACEL,UAAAA,GAAG,EAAEJ,CAAC,CAACI,GADT;AAEEE,UAAAA,GAAG,EAAEE,MAAM,CAACpB,IAAP,CAAYkB,GAFnB;AAGEI,UAAAA,MAAM,EAAEF,MAAM,CAACpB,IAAP,CAAYsB,MAHtB;AAIEC,UAAAA,SAAS,EAAEH,MAAM,CAACpB,IAAP,CAAYuB,SAJzB;AAKEC,UAAAA,KAAK,EAAEJ,MAAM,CAACpB,IAAP,CAAYwB,KALrB;AAMErB,UAAAA,KAAK,EAAEA,KANT;AAOEC,UAAAA,IAAI,EAAEA;AAPR,SAFa,CAAR,CAAP;AAYD,OAlCD,GAmCE,EAnCF;AAoCD;AACF,GAnDQ,EAmDN,CAACN,IAAD,CAnDM,CAAT;AAoDA,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAM2B,IAAI,CAACC,SAAL,CAAe1B,IAAf,CAAN,CAAP;AACD","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport default function Commandes() {\r\n  const [etat, setEtat] = useState(\"Attente\");\r\n  const [data, setData] = useState([]);\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      setData([]);\r\n      let liste;\r\n      let prix = 0;\r\n      const commande = await axios.post(\r\n        \"http://localhost:4000/commandes/recherche\",\r\n        { etat },\r\n        {\r\n          headers: {\r\n            Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n          },\r\n        }\r\n      );\r\n      commande.data.forEach(async (c) => {\r\n        liste = [];\r\n        c.liste.forEach(async (l) => {\r\n          const article = await axios.get(\r\n            \"http://localhost:4000/articles/recherche/\" + l._id\r\n          );\r\n          liste.push({\r\n            nom: article.data.nom,\r\n            prix: article.data.prix,\r\n            quantite: l.quantite,\r\n          });\r\n          prix += article.data.prix * l.quantite;\r\n        });\r\n        const client = await axios.post(\r\n          \"http://localhost:4000/clients/recherchesimple\",\r\n          c._id,\r\n          {\r\n            headers: {\r\n              Authorization: \"bearer \" + localStorage.getItem(\"jwt-cookie\"),\r\n            },\r\n          }\r\n        );\r\n        setData((d) => [\r\n          ...d,\r\n          {\r\n            _id: c._id,\r\n            nom: client.data.nom,\r\n            prenom: client.data.prenom,\r\n            telephone: client.data.telephone,\r\n            email: client.data.email,\r\n            liste: liste,\r\n            prix: prix,\r\n          },\r\n        ]);\r\n      }),\r\n        [];\r\n    }\r\n  }, [etat]);\r\n  return <div>{JSON.stringify(data)}</div>;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}